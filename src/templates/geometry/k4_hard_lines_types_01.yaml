metadata:
  id: k4_hard_lines_types_01
  version: "1.0.0"
  author: Mathbot
  created: 2026-01-30
  grade: 4
  topic: geometry.angles
  family: angles
  difficulty: hard
  steps: 3
  culture: en-US
  tags: [lines, coordinate grid, parallel, perpendicular, slopes]

variables:
  x1:
    type: integer
    min: 0
    max: 5
  y1:
    type: integer
    min: 0
    max: 5
  x2:
    type: integer
    min: 6
    max: 10
  y2:
    type: integer
    min: 0
    max: 5
  x3:
    type: integer
    min: 0
    max: 5
  y3:
    type: integer
    min: 6
    max: 10
  x4:
    type: integer
    min: 6
    max: 10
  y4:
    type: integer
    min: 6
    max: 10
  Answer:
    type: string

template: |
  On a coordinate grid, Line P passes through points ({{x1}}, {{y1}}) and ({{x2}}, {{y2}}).
  Line Q passes through points ({{x3}}, {{y3}}) and ({{x4}}, {{y4}}).
  Are lines P and Q parallel, perpendicular, or neither? Explain.

solution: |
  # Calculate slopes
  # For Line P: slope = (y2 - y1) / (x2 - x1)
  # For Line Q: slope = (y4 - y3) / (x4 - x3)

  # Avoid division by zero
  if x2 - x1 == 0 or x4 - x3 == 0:
      # Vertical line case
      if x2 - x1 == 0 and x4 - x3 == 0:
          Answer = "parallel (both lines are vertical)"
      elif (x2 - x1 == 0 and y4 - y3 == 0) or (y2 - y1 == 0 and x4 - x3 == 0):
          Answer = "perpendicular (one line is vertical, one is horizontal)"
      else:
          Answer = "neither"
  else:
      slope_p = (y2 - y1) / (x2 - x1)
      slope_q = (y4 - y3) / (x4 - x3)

      # Check if slopes are equal (parallel)
      if abs(slope_p - slope_q) < 0.001:
          Answer = "parallel (same slope)"
      # Check if slopes are negative reciprocals (perpendicular)
      elif abs(slope_p * slope_q + 1) < 0.001:
          Answer = "perpendicular (slopes are negative reciprocals)"
      else:
          Answer = "neither"

tests:
  - seed: 12345
    expected:
      answer: "parallel (same slope)"
  - seed: 67890
    expected:
      answer: "neither"

metadata:
  id: k5_medium_shopping_01
  version: "1.0.0"
  author: Alex Sabaka
  created: 2026-01-30
  grade: 5
  topic: arithmetic.multi_step
  family: shopping
  difficulty: medium
  steps: 4
  tags: [money, real-world, shopping, percentages, discount]

variables:
  name:
    type: person
  city:
    type: location
  time_of_day:
    type: time
  qty1:
    type: integer
    min: 2
    max: 5
  item1:
    type: item
    category: grocery
    plural: true
  price1:
    type: decimal
    format: money
    min: 1.00
    max: 5.00
    step: 0.25
  qty2:
    type: integer
    min: 2
    max: 5
  item2:
    type: item
    category: grocery
    plural: true
  price2:
    type: decimal
    format: money
    min: 1.00
    max: 5.00
    step: 0.25
  qty3:
    type: integer
    min: 2
    max: 5
  item3:
    type: item
    category: grocery
    plural: true
  price3:
    type: decimal
    format: money
    min: 1.00
    max: 5.00
    step: 0.25
  Answer:
    type: decimal
    format: money

template: |
  {{name}} goes shopping at a grocery store in {{city}} on a {{time_of_day}}.
  
  They buy {{qty1}} {{item1}} at {{price1}} each, {{qty2}} {{item2}} at {{price2}} each, and {{qty3}} {{item3}} at {{price3}} each.
  
  {{ "The store offers a 15% discount. How much does " ~ name ~ " pay after the discount?|After a 15% discount, what's the final cost?" | choice }}
  
  Please solve this problem and provide your final answer.

solution: |
  subtotal = qty1 * price1 + qty2 * price2 + qty3 * price3
  discount = subtotal * 0.15
  total = subtotal - discount
  Answer = total

tests:
  - seed: 12345
    expected:
      answer: "$23.80"

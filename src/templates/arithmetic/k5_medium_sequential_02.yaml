metadata:
  id: k5_medium_sequential_02
  version: "1.0.0"
  author: Alex Sabaka
  created: 2026-01-30
  grade: 5
  topic: arithmetic.multi_step
  family: sequential
  difficulty: medium
  steps: 5
  tags: [money, real-world, shopping, percentages, discount]

variables:
  name:
    type: person
  quantity1:
    type: integer
    min: 2
    max: 5
  item1:
    type: item
    category: grocery
  price1:
    type: decimal
    format: money
    min: 1.00
    max: 3.00
    step: 0.25
  quantity2:
    type: integer
    min: 2
    max: 5
  item2:
    type: item
    category: grocery
  price2:
    type: decimal
    format: money
    min: 2.00
    max: 5.00
    step: 0.25
  discount:
    type: integer
    format: percentage
    min: 10
    max: 20
    step: 5
  Answer:
    type: decimal
    format: money

template: |
  {{name}} bought {{quantity1}} {{item1}} at {{price1}} each and {{quantity2}} {{item2}} at {{price2}} each. The store offered a {{discount}}% discount on the total. {{ "How much did " ~ name ~ " pay after the discount?|What was the final price after the discount?|How much did the purchase cost after applying the discount?" | choice }}

solution: |
  cost1 = quantity1 * price1
  cost2 = quantity2 * price2
  subtotal = cost1 + cost2
  discount_amount = subtotal * (discount / 100)
  Answer = subtotal - discount_amount

tests:
  - seed: 12345
    expected:
      answer: "$18.90"

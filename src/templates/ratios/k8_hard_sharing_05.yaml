metadata:
  id: k8_hard_sharing_05
  version: "1.0.0"
  author: Alex Sabaka
  created: 2026-01-30
  grade: 8
  topic: ratios.complex_proportions
  family: sharing
  difficulty: hard
  steps: 5
  tags: [ratios, proportions, investment, operating_costs, multi_step]

variables:
  num_people:
    type: integer
    min: 2
    max: 4
  company:
    type: company
  name1:
    type: person
  name2:
    type: person
  name3:
    type: person
  invest1:
    type: decimal
    format: money
    min: 10000.0
    max: 50000.0
    step: 5000.0
  invest2:
    type: decimal
    format: money
    min: 10000.0
    max: 50000.0
    step: 5000.0
  invest3:
    type: decimal
    format: money
    min: 10000.0
    max: 50000.0
    step: 5000.0
  total_profit:
    type: decimal
    format: money
    min: 20000.0
    max: 100000.0
    step: 5000.0
  has_operating_cost:
    type: boolean
    probability: 0.5
  operating_cost:
    type: decimal
    format: money
    min: 5000.0
    max: 20000.0
    step: 1000.0
  Answer1:
    type: decimal
    format: money
  Answer2:
    type: decimal
    format: money
  Answer3:
    type: decimal
    format: money

template: |
  A group of {{num_people}} entrepreneurs form a partnership to launch {{company}}.
  
  {% if num_people == 2 %}
  {{name1}} invests {{invest1_formatted}} and {{name2}} invests {{invest2_formatted}}.
  {% elif num_people == 3 %}
  {{name1}} invests {{invest1_formatted}}, {{name2}} invests {{invest2_formatted}}, and {{name3}} invests {{invest3_formatted}}.
  {% else %}
  {{name1}} invests {{invest1_formatted}}, {{name2}} invests {{invest2_formatted}}, and {{name3}} invests {{invest3_formatted}}.
  {% endif %}
  
  After their first quarter, the business generates a profit of {{total_profit_formatted}}.
  
  The partners agree to split the profit proportionally based on their initial investments.
  
  {% if has_operating_cost %}However, they first need to pay {{operating_cost_formatted}} in operating costs before distributing the remaining profit. {% endif %}
  
  How much {% if has_operating_cost %}does each partner receive?{% else %}profit does each partner receive?{% endif %}
  
  Please solve this problem and provide your final answer.

solution: |
  # Calculate distributable profit
  if has_operating_cost:
      distributable = total_profit - operating_cost
  else:
      distributable = total_profit
  
  # Calculate total investment
  if num_people == 2:
      total_invest = invest1 + invest2
      amount1 = distributable * (invest1 / total_invest)
      amount2 = distributable * (invest2 / total_invest)
      Answer1 = round(amount1, 2)
      Answer2 = round(amount2, 2)
      Answer3 = 0.0
  elif num_people == 3:
      total_invest = invest1 + invest2 + invest3
      amount1 = distributable * (invest1 / total_invest)
      amount2 = distributable * (invest2 / total_invest)
      amount3 = distributable * (invest3 / total_invest)
      Answer1 = round(amount1, 2)
      Answer2 = round(amount2, 2)
      Answer3 = round(amount3, 2)
  else:
      total_invest = invest1 + invest2 + invest3
      amount1 = distributable * (invest1 / total_invest)
      amount2 = distributable * (invest2 / total_invest)
      amount3 = distributable * (invest3 / total_invest)
      Answer1 = round(amount1, 2)
      Answer2 = round(amount2, 2)
      Answer3 = round(amount3, 2)

tests:
  - seed: 12345
    expected:
      answer: "$18269.23 | $6730.77 | $0.00"
